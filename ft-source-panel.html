<link rel="import" href="../polymer/polymer.html">

<link rel="import" href="../iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../paper-dialog/paper-dialog.html">
<link rel="import" href="../iron-label/iron-label.html">
<link rel="import" href="../paper-button/paper-button.html">
<link rel="import" href="../ft-create-connection-dialog/ft-create-connection-dialog.html">

<!--
`ft-source-panel`
A panel that displays a list of FileThis sources.

@demo demo/index.html 
-->

<dom-module id="ft-source-panel">

    <style include="iron-flex iron-flex-alignment"></style>

    <template>

        <!-- Grid of cells -->
        <div class="horizontal layout wrap"
             style="width:100%;
                background-color:white;
                padding-left:16px; padding-right:16px;">

            <!-- Cells -->
            <template is="dom-repeat" items="[[sources]]" as="source">

                <!-- Cell -->
                <div class="layout vertical center"
                     style="height:141px; padding:8px;">

                    <!-- Logo Box -->
                    <div class="layout vertical center"
                         on-click="_onSourceClicked"
                         style="width:150px; height:65px;
                            border:1px solid #DEDEDE;
                            justify-content:center;
                            cursor:pointer;">

                        <!-- Logo -->
                        <img
                                style="width:auto; max-width:100%;"
                                src="[[source.logoUrl]]">
                        </img>

                    </div>

                    <!-- "Connect" -->
                    <div on-click="_onSourceClicked"
                         style="font-family:Arial; font-size:15px;
                            color:#7D7D7D;
                            width:150px;
                            background-color:#FAFAFA;
                            text-align:center;
                            padding-top:4px; padding-bottom:6px;
                            border-left:1px solid #DEDEDE; border-right:1px solid #DEDEDE; border-bottom:1px solid #DEDEDE;
                            cursor:pointer;">
                        Connect
                    </div>

                    <!-- Name -->
                    <div on-click="_onSourceClicked"
                         style="font-family:Arial;
                            color:#343434;
                            width:150px;
                            padding-top:8px;
                            text-align:center;
                            text-overflow:ellipsis; white-space: nowrap; overflow: hidden;
                            cursor:pointer;">
                        [[source.name]]
                    </div>
                </div>
            </template>
        </div>

        <!-- Connect Dialog -->
        <paper-dialog modal id="modalCreateConnectionDialog",
                      on-iron-overlay-opened="_onCreateConnectionDialogOpened",
                      style="width:630px;
                      padding-left:40px; padding-top:12px; padding-right:40px; padding-bottom:5px;">

            <ft-create-connection-dialog
                    id="createConnectionDialog">
            </ft-create-connection-dialog>

        </paper-dialog>

    </template>

    <script>
        Polymer({

            is: 'ft-source-panel',

            properties: {

                /** The list of source resources to be displayed. */
                sources: {
                    type: Array,
                    notify: true,
                    value: []
                }
            },

            _onSourceClicked: function(event, detail)
            {
                var source = event.model.source;
                var createConnectionDialog = this.$.createConnectionDialog;
                createConnectionDialog.source = source;

                modalCreateConnectionDialog.open();
            },

            _onCreateConnectionDialogOpened: function(event, detail)
            {
                // TODO: What is this for? Setting the keyboard focus on the first field?
            }
        });
    </script>
</dom-module>
